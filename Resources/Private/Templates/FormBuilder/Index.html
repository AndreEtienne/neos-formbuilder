{namespace neos=TYPO3\Neos\ViewHelpers}
{namespace fb=CRON\FormBuilder\ViewHelpers}

<f:form action="submit" method="post" additionalAttributes="{attributes}">

	<f:validation.ifHasErrors>
		<div class="has-error">
			<strong><f:translate id="formBuilder.index.errors.title" package="CRON.FormBuilder" /></strong>
			<ul>
				<f:for each="{elementsArray}" as="element">
					<f:validation.results for="data.{element.identifier}">
						<f:if condition="{validationResults.flattenedErrors}">
							<f:for each="{validationResults.flattenedErrors}" as="errors">
								<li>{element.properties.label}:
									<ul>
										<f:for each="{errors}" as="error">
											<li>{error -> f:translate(id: error.code, arguments: error.arguments, package: 'TYPO3.Flow', source: 'ValidationErrors')}</li>
										</f:for>
									</ul>
								</li>
							</f:for>
						</f:if>
					</f:validation.results>
				</f:for>
			</ul>
		</div>
	</f:validation.ifHasErrors>

	<f:if condition="{neos:rendering.inBackend(node: documentNode)}">
		<strong><f:translate id="formBuilder.index.backend.addFormElements" package="CRON.FormBuilder" /></strong>
	</f:if>
	<fb:formBuilder elements="{elementsArray}"/>
	{elements -> f:format.raw()}
	<f:form.hidden name="__formId" value="{node.identifier}"></f:form.hidden>
</f:form>
